{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":-1,"lists":{"npm module":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"AltSimpleWorkspace","children":{"main":{"name":"main","type":"apogee.Folder","children":{"intermediateTable":{"name":"intermediateTable","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(!isFinite(inputBody.value)) {\n    throw new Error('Invalid request body format. It should be of the format {\"value\":--number--}');\n}\n\nif(inputBody.value > MAX_INPUT_VALUE) {\n    throw new Error(\"The input number should be less than \" + MAX_INPUT_VALUE);\n}\n\nreturn new Promise( (resolve,reject) => {\n    setTimeout( () => resolve(inputBody.value),delayMs);\n});","supplementalCode":""}},"delayMs":{"name":"delayMs","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if((inputParams)&&(inputParams.delay)) {\n    return inputParams.delay;\n}\nelse {\n    //default delay\n    return 3000;\n}","supplementalCode":""}},"inputParams":{"name":"inputParams","type":"apogee.JsonMember","updateData":{"data":{"key":"horse"}}},"inputBody":{"name":"inputBody","type":"apogee.JsonMember","updateData":{"data":{"value":4}}},"outputNumber":{"name":"outputNumber","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"var data = {};\n//We use the input parameter \"key\" if there is one. Otherwise we use \"defaultKey\"\nvar key = ((inputParams)&&(inputParams.key)) ? inputParams.key : \"defaultKey\"\n\n//We create a dummy value from out intermediate table below.\ndata[key] = intermediateTable * 2;\n\nreturn data;","supplementalCode":""}},"MAX_INPUT_VALUE":{"name":"MAX_INPUT_VALUE","type":"apogee.JsonMember","updateData":{"data":500}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Alternate Simple Workspace"}]},{"type":"paragraph","content":[{"type":"text","text":"This workspace is essentially the same as the Simple Workspace except we have added a delay and we have added some additional endpoints for this workspace."}]},{"type":"paragraph","content":[{"type":"text","text":"Endpoints:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"/altsimple/processnumber - This takes a JSON body and two input parameters, "},{"type":"text","marks":[{"type":"italic"}],"text":"key"},{"type":"text","text":" and "},{"type":"text","marks":[{"type":"italic"}],"text":"delay"},{"type":"text","text":".  Both input parameters are optional."}]},{"type":"listItem","content":[{"type":"text","text":"/altsimple/processbodyonly - This is the same as processnumber above except it does non take the input parameters. Instead it keeps the initial value for the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"inputParams"},{"type":"text","text":"."}]},{"type":"listItem","content":[{"type":"text","text":"/altsimple/maxinput - This takes no input values. It just reads out he cell "},{"type":"text","marks":[{"type":"italic"}],"text":"MAX_INPUT_VALUE"},{"type":"text","text":"."}]},{"type":"listItem","content":[{"type":"text","text":"/altsimple/noout - This takes just the input parameters, including the one to optionally set the delay. It returns not output."}]}]},{"type":"paragraph","content":[{"type":"text","text":"The descriptor that does is the following:"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"{"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"  \"workspaces\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"    \"altsimple\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"      \"source\": \"deploy/AltSimpleWorkspace.json\","}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"      \"endpoints\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        \"processnumber\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"inputs\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"            \"body\": \"main.inputBody\","}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"            \"queryParams\": \"main.inputParams\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          },"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"output\": \"main.outputNumber\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        },"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        \"processbodyonly\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"inputs\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"            \"body\": \"main.inputBody\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          },"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"output\": \"main.outputNumber\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        },"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        \"maxinput\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"output\": \"main.MAX_RETURN_VALUE\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        },"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        \"noout\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          \"inputs\": {"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"            \"queryParams\": \"main.inputParams\""}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"          }"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"        }"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"      }"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"    }"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"  }"}]},{"type":"paragraph","content":[{"type":"text","marks":[{"type":"textcolor","attrs":{"color":"blue"}},{"type":"fontfamily","attrs":{"fontfamily":"Monospace"}}],"text":"}"}]},{"type":"heading2","content":[{"type":"text","text":"Inputs"}]},{"type":"paragraph","content":[{"type":"text","text":"This cell will take the value of the query parameters, as defined in our descriptor."}]},{"type":"apogeeComponent","attrs":{"name":"inputParams","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" This cell with take the value of the request body."}]},{"type":"apogeeComponent","attrs":{"name":"inputBody","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Output"}]},{"type":"paragraph","content":[{"type":"text","text":"The response will take the value of the following cell as the body, as defined in the descriptor."}]},{"type":"apogeeComponent","attrs":{"name":"outputNumber","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Internal Processing"}]},{"type":"paragraph","content":[{"type":"text","text":" Here we have added a delay, just to verify an asynchronous web service. We also do error checks to make sure the input is valid. It should be a number smaller than MAX_INPUT_VALUE."}]},{"type":"apogeeComponent","attrs":{"name":"intermediateTable","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" The user can pass in a delay with the query param "},{"type":"text","marks":[{"type":"italic"}],"text":"delay"},{"type":"text","text":". If none is passed, a default value is used."}]},{"type":"apogeeComponent","attrs":{"name":"delayMs","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"We also limit the size of the input number, just because."}]},{"type":"apogeeComponent","attrs":{"name":"MAX_INPUT_VALUE","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"paragraph","content":[{"type":"text","text":" "}]}]}},"children":{"intermediateTable":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"delayMs":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"inputParams":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"inputBody":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"outputNumber":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"MAX_INPUT_VALUE":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":-1,"tabOpened":true,"tabShowing":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}