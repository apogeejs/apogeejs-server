{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":-1,"lists":{"npm module":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"TestWorkspace","children":{"main":{"name":"main","type":"apogee.Folder","children":{"outputNumber":{"name":"outputNumber","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"var data = {};\n//We use the input parameter \"key\" if there is one. Otherwise we use \"defaultKey\"\nvar key = ((queryParams)&&(queryParams.key)) ? queryParams.key : \"defaultKey\"\n\n//We create a dummy value from out intermediate table below.\ndata[key] = intermediateTable * coefficients.a + coefficients.b;\n\nreturn data;","supplementalCode":""}},"intermediateTable":{"name":"intermediateTable","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"if(!isFinite(inputBody.value)) {\n    throw new Error('Invalid request body format. It should be of the format {\"value\":--number--}');\n}\n\nif(inputBody.value > MAX_INPUT_VALUE) {\n    throw new Error(\"The input number should be less than \" + MAX_INPUT_VALUE);\n}\n\nreturn inputBody.value;","supplementalCode":""}},"inputBody":{"name":"inputBody","type":"apogee.JsonMember","updateData":{"data":{"value":4}}},"MAX_INPUT_VALUE":{"name":"MAX_INPUT_VALUE","type":"apogee.JsonMember","updateData":{"data":500}},"_workspaceDescriptor_":{"name":"_workspaceDescriptor_","type":"apogee.JsonMember","updateData":{"data":{"name":"test"}}},"_endpointDescriptor_processnumber":{"name":"_endpointDescriptor_processnumber","type":"apogee.JsonMember","updateData":{"data":{"name":"ab","path":"/a/:a/b/:b","methods":["get","post"],"inputs":{"body":"main.inputBody","queryParams":"main.queryParams","pathParams":"main.pathParams"},"output":"main.outputNumber","settings":{}}}},"queryParams":{"name":"queryParams","type":"apogee.JsonMember","updateData":{"data":{"key":"horse"}}},"pathParams":{"name":"pathParams","type":"apogee.JsonMember","updateData":{"data":{"a":"1","b":"0"}}},"coefficients":{"name":"coefficients","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"let values = {};\nif(isFinite(pathParams.a)) {\n    values.a = parseInt(pathParams.a);\n}\nelse {\n    throw new Error(\"The 'a' parameter not properly set!\")\n}\nif(isFinite(pathParams.b)) {\n    values.b = parseInt(pathParams.b);\n}\nelse {\n    throw new Error(\"The 'b' parameter not properly set!\")\n}\n\nreturn values;","supplementalCode":""}}}}}},"components":{"main":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"heading1","content":[{"type":"text","text":"Simple Example Workspace"}]},{"type":"paragraph","content":[{"type":"text","text":"This is a simple example workspace to demonstrate how an Apogee web service works."}]},{"type":"paragraph","content":[{"type":"text","text":"To deploy a workspace as a web service you must save the workspace to the deploy directory and update the descriptor.  This is admittedly a bit cumbersome for something that is supposed to be an \"easy\" code environment, but this process will be made very simple. For now however it it manual."}]},{"type":"heading2","content":[{"type":"text","text":"Descriptors"}]},{"type":"apogeeComponent","attrs":{"name":"_workspaceDescriptor_","id":0,"state":""}},{"type":"paragraph"},{"type":"apogeeComponent","attrs":{"name":"_endpointDescriptor_processnumber","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The descriptor is used to map a request to a workspace and to map the inputs from the request to cells in the workspace. Also, it defines the output, if there is one, from a cell in the workspace."}]},{"type":"paragraph","content":[{"type":"text","text":"The following descriptor gives the following information:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"text","text":"There is one workspace, named "},{"type":"text","marks":[{"type":"italic"}],"text":"simple."}]},{"type":"listItem","content":[{"type":"text","text":"The workspace is at the path "},{"type":"text","marks":[{"type":"italic"}],"text":"deploy/simpleWorkspace.json."}]},{"type":"listItem","content":[{"type":"text","text":"There is a single endpoint defined for this workspace, named "},{"type":"text","marks":[{"type":"italic"}],"text":"processNumber."}]},{"type":"listItem","content":[{"type":"text","text":"The corresponding request that maps to this endpoint is: "},{"type":"text","marks":[{"type":"italic"}],"text":"http://[host]/simple/processNumber."}]},{"type":"listItem","content":[{"type":"text","text":"When this request is made, the body of the request is passed to the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"main.input"}]},{"type":"listItem","content":[{"type":"text","text":"and the query parameters are passed to the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"main.inputParams."}]},{"type":"listItem","content":[{"type":"text","text":"The workspace then updates. The response is returned after the update completes."}]},{"type":"listItem","content":[{"type":"text","text":"An (optional) output is defined as the value of the cell "},{"type":"text","marks":[{"type":"italic"}],"text":"main.outputNumber"},{"type":"text","text":". That value is the body of the response."}]}]},{"type":"paragraph","content":[{"type":"text","text":"Below we define the actual workspace."}]},{"type":"heading2","content":[{"type":"text","text":"Using This Workspace"}]},{"type":"paragraph","content":[{"type":"text","text":"To use this workspace, make a query of the form"}]},{"type":"heading2","content":[{"type":"text","text":"Inputs"}]},{"type":"paragraph","content":[{"type":"text","text":"This cell will take the value of the query parameters, as defined in our descriptor."}]},{"type":"apogeeComponent","attrs":{"name":"queryParams","id":0,"state":""}},{"type":"apogeeComponent","attrs":{"name":"pathParams","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" This cell with take the value of the request body."}]},{"type":"apogeeComponent","attrs":{"name":"inputBody","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Output"}]},{"type":"paragraph","content":[{"type":"text","text":"The response will take the value of the following cell as the body, as defined in the descriptor."}]},{"type":"apogeeComponent","attrs":{"name":"outputNumber","id":0,"state":""}},{"type":"heading2","content":[{"type":"text","text":"Internal Processing Cells"}]},{"type":"paragraph","content":[{"type":"text","text":"Here we just have some dummy logic to demonstrate some sort of processing."}]},{"type":"paragraph","content":[{"type":"text","text":"The following value is used to trigger an error, just so we can demonstrate doing that."}]},{"type":"apogeeComponent","attrs":{"name":"MAX_INPUT_VALUE","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":"The path parameters are strings, We want to convert them to numbers."}]},{"type":"apogeeComponent","attrs":{"name":"coefficients","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" This is a value pulled from our input, again just as dummy processing."}]},{"type":"apogeeComponent","attrs":{"name":"intermediateTable","id":0,"state":""}},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":" "}]}]}},"children":{"outputNumber":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"intermediateTable":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"inputBody":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"MAX_INPUT_VALUE":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"_workspaceDescriptor_":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"_endpointDescriptor_processnumber":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"queryParams":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"pathParams":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"coefficients":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Info":{"isViewActive":true},"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false,"height":7000},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true,"tabShowing":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}