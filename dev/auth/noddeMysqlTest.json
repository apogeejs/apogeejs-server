{"fileType":"apogee app js workspace","version":"0.60","references":{"viewState":{"treeState":1,"lists":{"npm module":{"treeState":0}}}},"code":{"model":{"fileType":"apogee model","version":0.3,"name":"NodeMySQLTest","children":{"Model":{"name":"Model","type":"apogee.Folder","children":{"query":{"name":"query","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"return createQueryPromise(connectionConfig,sql);\n\n","supplementalCode":""}},"sql":{"name":"sql","type":"apogee.JsonMember","updateData":{"data":"select * from city;"}},"createQueryPromise":{"name":"createQueryPromise","type":"apogee.FunctionMember","updateData":{"argList":["connectionConfig","sql"],"functionBody":"var mysql = require('mysql');\n\nvar connection = mysql.createConnection(connectionConfig);\n\nvar queryPromise = new Promise((resolve,reject) => {\n    connection.connect(function(err) {\n        if(err) {\n            reject(err.message);\n        }\n        else {    \n            connection.query(sql, function(err,result) {\n                if(err) {\n                    reject(err.message);\n                }\n                else {\n                    resolve(result);\n                }\n            });\n        }\n        connection.end();\n    });\n});\n\nreturn queryPromise;","supplementalCode":""}},"createPlaceholderQueryPromise":{"name":"createPlaceholderQueryPromise","type":"apogee.FunctionMember","updateData":{"argList":["connectionConfig","sql","data"],"functionBody":"var mysql = require('mysql');\n\nvar connection = mysql.createConnection(connectionConfig);\n\nvar queryPromise = new Promise((resolve,reject) => {\n    connection.connect(function(err) {\n        if(err) {\n            reject(err.message);\n        }\n        else {    \n            connection.query(sql, data, function(err,result) {\n                if(err) {\n                    reject(err.message);\n                }\n                else {\n                    resolve(result);\n                }\n            });\n        }\n        //just quit - don't bother handling an error for now\n        connection.end();\n    });\n});\n\nreturn queryPromise;","supplementalCode":""}},"sql2":{"name":"sql2","type":"apogee.JsonMember","updateData":{"data":"select * from city where CountryCode = ? and Population > ?;"}},"query2":{"name":"query2","type":"apogee.JsonMember","updateData":{"argList":[],"functionBody":"var data = [\"AFG\",1000000];\n\nreturn createPlaceholderQueryPromise(connectionConfig,sql2,data);","supplementalCode":""}},"connectionConfig":{"name":"connectionConfig","type":"apogee.JsonMember","updateData":{"data":{"host":"localhost","user":"root","password":"admin","database":"world"}}},"NOTES":{"name":"NOTES","type":"apogee.JsonMember","updateData":{"data":"http://www.mysqltutorial.org/mysql-nodejs/\n\n(This doesn't follow this exactly, I had started with W3 \nschools, but that is not as thorough. I should review this \nfor best practices.)\n\nThis uses a stock DB that is on my current machine."}}}}}},"components":{"Model":{"type":"apogeeapp.PageComponent","data":{"doc":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"query","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"sql","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"createQueryPromise","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"createPlaceholderQueryPromise","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"sql2","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"query2","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"connectionConfig","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]},{"type":"apogeeComponent","attrs":{"name":"NOTES","id":0,"state":""}},{"type":"paragraph","content":[{"type":"text","text":" "}]}]}},"children":{"query":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"sql":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":7000},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"createQueryPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"createPlaceholderQueryPromise":{"type":"apogeeapp.FunctionCell","viewState":{"childDisplayState":{"views":{"Code":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"sql2":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":7000},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"query2":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":true,"height":7000},"Private":{"isViewActive":false}}}}},"connectionConfig":{"type":"apogeeapp.JsonCell","dataView":"Colorized","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":280},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}},"NOTES":{"type":"apogeeapp.JsonCell","dataView":"Text Data","viewState":{"childDisplayState":{"views":{"Data":{"isViewActive":true,"height":7000},"Formula":{"isViewActive":false},"Private":{"isViewActive":false}}}}}},"viewState":{"childDisplayState":null,"treeState":1,"tabOpened":true,"tabShowing":true}},"viewState":{"treeState":1}}},"viewState":{"treeState":1}}